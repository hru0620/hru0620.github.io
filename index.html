<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="apple-touch-icon" type="image/png" href="https://static.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png" />
<meta name="apple-mobile-web-app-title" content="CodePen">
<link rel="shortcut icon" type="image/x-icon" href="https://static.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico" />
<link rel="mask-icon" type="" href="https://static.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg" color="#111" />
<title>CodePen - Insta-hearts ‚ù§</title>
<style>
body {
 background-color: #2d2d2d;
 overflow: hidden;
 text-align:center;
  display: flex;
  align-items: center;
  justify-content: center; 
}

body,
html {
 height: 100%;
 width: 100%;
 margin: 0;
 padding: 0;
}

svg {
 width: 100%;
 height: 100%;
 visibility: hidden;
 
}

.defaultPath, #myPath {
	fill: none;
	stroke: #FFF;
	stroke-width: 63;
	stroke-linecap: round;
	
}

.mainHeart {
	cursor: pointer;
	-webkit-tap-highlight-color:transparent;
}

#whiteHeart {
	pointer-events: none;
}
</style>
<script>
  window.console = window.console || function(t) {};
</script>
<script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>
</head>
<body translate="no">
<svg id="mainSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
<defs>
<path class="defaultPath" />
<g class="smallHeart" opacity="0">
<circle fill="#E8485C" cx="31.5" cy="31.5" r="31.5" />
<path fill="#FFF" d="M49.7,32.2C47.3,43.3,31.5,51,31.5,51s-15.5-8.2-18.2-18.8c-2.5-9.7,8.5-20.5,18.2-9.8
		C42,13.2,51.8,22.4,49.7,32.2z" />
</g>
</defs>
<g id="heartContainer" />
<g id="heart" class="mainHeart" transform="translate(350 450)">
<circle fill="#E8485C" cx="51.5" cy="51.5" r="51.5" />
<path id="whiteHeart" fill="#FFF" d="M79.6,48C75.9,65.1,51.5,77,51.5,77S27.6,64.3,23.5,48c-3.8-15,13.1-31.7,28.1-15.1C67.8,18.6,82.9,32.8,79.6,48z" />
</g>

</svg>
<script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-db44b196776521ea816683afab021f757616c80860d31da6232dedb8d7cc4862.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.1.1/gsap.min.js'></script>
<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/35984/ScrubGSAPTimeline_3_0.js'></script>
<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/MotionPathPlugin.min.js?v=8'></script>
<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/DrawSVGPlugin3.min.js'></script>
<script id="rendered-js">
let select = s => document.querySelector(s),
selectAll = s => document.querySelectorAll(s),
mainSVG = select('#mainSVG'),
heartContainer = select('#heartContainer'),
defaultPath = select('.defaultPath'),
mainHeart = select('.mainHeart'),
smallHeart = select('.smallHeart'),
whiteHeart = select('#whiteHeart'),
curviness = 0.84,
rawPath,
clickCount = 0;

gsap.set('svg', {
  visibility: 'visible' });

gsap.set(smallHeart, {
  transformOrigin: '50% 50%' });

gsap.set(whiteHeart, {
  transformOrigin: '20% 80%' });


function destroy(heart, path) {
  heartContainer.removeChild(heart);
  heartContainer.removeChild(path);
}

function bounceHeart() {

  gsap.fromTo(whiteHeart, {
    scale: 0.18,
    rotation: 45 },
  {
    duration: 2,
    rotation: 0,
    scale: 1,
    ease: 'elastic(0.83, 0.38)' });



}
function createPath() {

  let myPath = defaultPath.cloneNode(true);
  let mySmallHeart = smallHeart.cloneNode(true);
  heartContainer.appendChild(myPath);
  heartContainer.appendChild(mySmallHeart);
  let point1 = { x: 400, y: 500 };
  let point2 = { x: gsap.utils.random(350, 450), y: gsap.utils.random(300, 400) };
  let point3 = { x: gsap.utils.random(200, 600), y: gsap.utils.random(150, 250) };
  let point4 = { x: gsap.utils.random(100, 700), y: gsap.utils.random(-100, 150) };
  let points = [point1.x, point1.y, point2.x, point2.y, point4.x, point4.y];
  rawPath = [MotionPathPlugin.pointsToSegment(points, curviness)];
  myPath.setAttribute("d", MotionPathPlugin.rawPathToString(rawPath));
  gsap.set(myPath, {
    drawSVG: '0% 0%',
    autoAlpha: 0 });



  let drawPos1 = gsap.utils.random(16, 45);
  let drawPos2 = gsap.utils.random(34, 66);
  let tl = gsap.timeline({ onComplete: destroy, onCompleteParams: [mySmallHeart, myPath], paused: true, defaults: {
      ease: 'linear' } });

  tl.set([myPath, mySmallHeart], {
    autoAlpha: 1 }).

  to(myPath, {
    drawSVG: '0% 33%' }).

  to(myPath, {
    drawSVG: `${drawPos1}% 66%` }).

  to(myPath, {
    drawSVG: '100% 100%' }).

  to(mySmallHeart, {
    duration: 1.5,
    transformOrigin: '50% 50%',
    motionPath: {
      path: myPath,
      autoRotate: 90,
      offsetX: -31,
      offsetY: -31 } },

  0).
  to(mySmallHeart, {
    duration: 1.5,
    ease: 'expo.in',
    autoAlpha: 0 },
  0).
  to(myPath, {
    stroke: '#E8485C',
    ease: 'expo',
    duration: 1.5 },
  0);
  let mainTl = gsap.timeline();
  mainTl.to(tl, {
    duration: 'random(0.7, 2)',
    time: tl.duration(),
    ease: 'sine.inOut' });


  if (clickCount % 10 === 0 || clickCount === 0) {
    bounceHeart();
  }
  clickCount++;

}

mainHeart.addEventListener('click', createPath);
//gsap.globalTimeline.timeScale(0.25)
//# sourceURL=pen.js
    </script>
</body>
</html>
